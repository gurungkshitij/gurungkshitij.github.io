---
layout: post
title: "New York Subway Ridership Prediction based on Weather and Holidays"
date: 2025-04-28
category: Data Science
excerpt: " A End-to-End Data Science project covering, real worl data processing, EDA, Advance predictive modeling, and local deployment to React WebApp</b>"
feature: https://cdn.abcotvs.com/dip/images/5456383_080919-wabc-ap-nyc-subway-station-img.jpg
comments: true
---

# Introduction & Problem Definition

Weather conditions significantly influence public transportation usage, but the extent of this
impact remains understudied. In New York City—where millions rely on the subway daily—
understanding how factors like temperature, precipitation, and holidays affect ridership can
empower transit planners to optimize service and help commuters make informed travel
decisions. This project leverages statistical modeling and machine learning with historical data to
quantify these relationships and predict subway ridership under varying weather conditions.

### Key Findings:

- Ridership peaks mid-week—especially on Tuesdays and Wednesdays with longer daylight duration—but declines on weekends and holidays
- Higher temperatures, wider temperature swings, increased precipitation, and stronger winds all negatively impacts ridership
- Heavy rainfall significantly reduces ridership across the system
- Weekdays show consistently higher ridership than weekends
- Holidays impact ridership patterns beyond typical seasonal trends
- Temperature variability has a correlation with ridership

### We plan to achieve following things in this project:

- Datasets & Preprocessing

  - Our main dataset was the MTA Subway Hourly Ridership: 2020-2024 from data.ny.gov, which contains ~111 million rows and 12 columns. It includes time series data on hourly ridership at each station complex, originally broken down by payment type. By building a normalized SQLite database, we were able to reduce the dataset size from a >16 GB CSV file to a 7 GB database, aggregated by station and hour. The resulting hourly ridership values served as the dependent variable in our analysis.
  - In addition, we also incorporated the following datasets:
  - Weather → accessed historical weather data from Open-meteo API (1,325 rows x 26 cols)
  - Federal Holidays → sourced from the U.S. Office of Personnel Management (11 rows x 2 cols)
  - School Holidays → sourced from NYC Public Schools website (39 rows x 3 cols)

- Exploratory Data Analysis and Feature Engineer
  - We performed Descriptive analysis and created scatter plots, historgrams, box plots to understand the data distribution
  - We built correlation heat maps, perfomed VIF analysis and removed six redundant weather predictors
  - We created feature engineered variables such as temperature range and transformed (log) skewed features suchash precipitation and snow.
- Time series Analysis
  - Built autoregressive (AR) models that can then be used a s a comparative benchmark for more complex models augmented with additional features, which are expected to yield superior predictive performance.
  - Decomposition revealed a weak but slightly positive trend in ridership, while both the seasonal component and autocorrelation analysis showed strong weekly cyclicality.
  - Built Holt-Winters Exponential Smoothing and SARIMA, finding that both over-predicted during holidays–highlighting the importance of incorporating holiday data to better predict ridership.
- Predictive Modeling (Machine Learning)
  - Parametric models: Multiple Linear Regression (OLS), Regularized Regression (Ridge, Lasso, Elastic Net), Recurrent Neural Networks (RNNs) plus Long Short-Term Memory networks (LSTMs)
  - Non-Parametric models: Tree based (Decision Tree, Random Forest, XGBoost, CATBoost), PCA Regression
- Data Visualization
  - Developed interactive D3.js and Tableau visualizations for EDA and further exploration
- Model Evaluation and comparison.
  - Deployed our best model (Random Forest with Temporal Feature) in Reach Web App for Inference/Prediction
- Conclusion and Results
- Build a React WebApp to consolidate our entire project

### How users can get started with the project?

- [README.md](https://github.com/mducphamm/CSE6242_Spring2025/blob/main/README.md) will walk you through how to get started
- [Link to the Github project report](https://github.com/mducphamm/CSE6242_Spring2025)
  - Folder structure
    - ridership-data: Ridership data and the code used to process it
    - weather-data: Code for gathering weather data and preprocessing
    - linear-regression-models: Initial base regression model establishing correlation between weather and ridership
    - advanced-prediction-models: Advanced Random Forest model that improved upon the linear regression approach
    - time-series-analysis: Jupyter notebook containing time series analysis of the data
    - ridership-prediction-app-frontend: React-based frontend with static pages and interactive dashboards using D3.js and Tableau visualizations
    - ridership-prediction-app-backend: Flask-based backend using the Random Forest model to calculate ridership based on weather data
    - ridership-prediction-app-heroku: Combined frontend and backend files for Heroku deployment

<center>
    <div class="btn-group">
        <a href="https://cse6242-mta-ridership-app-359c84fb8d2a.herokuapp.com/" class="btn btn-success"> Project WebApp</a>
        <a href="https://github.com/mducphamm/CSE6242_Spring2025" class="btn btn-info"> Source Codes</a>
    </div>
</center>

<hr>

<figure class="half">
    <a href='/assets/img/D&VPoster.png'><img src='/assets/img/D&VPoster.png'></a>
    <a href='/assets/img/co2_country.jpg'><img src='/assets/img/co2_country.jpg'></a>
    <figcaption>Poster<sub>2</sub> and CH<sub>4</sub> </figcaption>
</figure>
        
<figure class="half">
	<a href='/assets/img/tableau.png'><img src='/assets/img/tableau.png'></a>
	<a href='/assets/img/D3.png'><img src='/assets/img/D3.png'></a>
    <figcaption>Interactive Visualizations</figcaption>
</figure>

<figure class="half">
    <a href='/assets/img/Model Inference.png'><img src='/assets/img/Model Inference.png'></a>
</fugure>
